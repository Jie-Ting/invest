<!DOCTYPE html>

<head>
  <title>Drag and Drop File Upload</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <link rel="shortcut icon" href="/assets/favicon.ico">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/upload.css">
</head>

<body>
<ul class="top-menu" id="top-menu">
		<div><a href="index.html"><img class="logo" id="" src="img/logo.png"/></div>
	    <li><a href="user.html"><img class="small" src="img/user.png"/></a>
        </li>
		<li><a href="like.html"><img class="small" src="img/like.png"/></a>
        </li>
		<li>
			<img class="small" id="cart-icon" src="img/shopping-cart.png"/>
			<div class="cart">
                <h2 class="cart-title">è³¼ç‰©è»Š</h2>
                <!-- Content -->
                <div class="cart-content"></div>
                <!-- Total -->
                <div class="total">
                    <div class="total-title">ç¸½åƒ¹</div>
                    <div class="total-price">$0</div>
                </div>
                <!-- Buy Button -->
                <button type="button" class="btn-buy">å‰å¾€çµå¸³</button>
                <!-- Cart Close -->
                <i class='bx bx-x' id="close-cart"></i>
			</div>
        </li>
        <li>
			<div class="search">
				<input type="search" id="search" placeholder="Search..."/>
				<button id="btn-search">
					<img id="" src="img/magnifier.png"/>
				</button>
			</div>
        </li>
	</ul>
	<!--å·¦å´é¸å–®-->
	<ul class="left-menu" id="left-menu">
        <li><a href="index.html#all">All</a>
        </li>
        <li><a href="index.html#new">News</a>
        </li>
        <li><a href="upload2.html">Sell</a>
        </li>
		<li><a href="history.html">History</a>
        </li>
        <li><a href="form.html">Contact us</a>
        </li>
	</ul>
	<div class = "allupload">
	<h1 id="topic">æˆ‘è¦ä½µå–®!</h1>
		<form class="upload" action="#">
			<div class="box">
				<p>å•†å“åç¨±</p>
				<input type="text" id="title" size="20" required="required"/>
				</br>
				<p>å•†å“ä»‹ç´¹</p>
				<textarea id="intro" rows="3" required="required"></textarea>
				</br>
				<p>å•†å“é€£çµ/ç”¢å“å‡ºç”¢åœ°</p>
				<textarea id="link" rows="3"></textarea>
				</br>
				<button class="btn" id ="uploadbtn">ç™¼å¸ƒ</button>
			</div>	
		</form>
		
	</div>
	<div class="drop-zone">
		<span class="drop-zone__prompt">å°‡æ–‡ä»¶æ‹–æ”¾åˆ°æ­¤è™•æˆ–å–®æ“Šä¸Šå‚³</span>
		<input type="file" name="myFile" class="drop-zone__input">
		</div>
	<h2>é€™æ˜¯ç¯„ä¾‹</h2>
	<div class="list" id="list">
		<div class="article">
			<h2>è¨˜æ†¶çœ åå¢Š</h2>
			<p>é€™æ˜¯ä¸€æ¬¾å…¼å…·èˆ’é©èˆ‡ç¾è§€çš„åå¢Š!çœŸçš„è¶…ç´šæ¨è–¦ï¼Œæˆ‘å€‘å®¿èˆä¸€äººä¸€å€‹!</br>
			   æ­¡è¿ä¾†337è©¦å~</p>
			<span>$200</span>
			<a href="https://detail.tmall.com/item_o.htm?abbucket=14&id=652118715282&ns=1&spm=a230r.1.14.1.60557b1e8CH4J6">
					ğŸ”—æ·˜å¯¶é€£çµ</a>
			<a href="index.html" class="book-now btn">ç«‹å³è³¼è²·</a>
			<div class="pic"><img src="img/product1.jpg" alt=""></div>
		</div>
	</div>
	
  <script>
	// forEach() æ–¹æ³•æœƒå°‡é™£åˆ—å…§çš„æ¯å€‹å…ƒç´ ï¼Œçš†å‚³å…¥ä¸¦åŸ·è¡Œçµ¦å®šçš„å‡½å¼ä¸€æ¬¡ï¼ŒæŠŠ0çš„æ¯å€‹å…ƒç´ ï¼Œå‚³åˆ°function(inputElement)
	// Element.closest()æ–¹æ³•ä½¿ç”¨ä¾†ç²å–ï¼šåŒ¹é…ç‰¹å®šé¸æ“‡å™¨èˆ‡é›¢é–‹ç•¶å‰å…ƒç´ æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ ï¼ˆä¹Ÿå¯ä»¥æ˜¯ç•¶å‰å…ƒç´ æœ¬èº«ï¼‰ã€‚å¦‚æœåŒ¹é…ä¸åˆ°ï¼Œå‰‡è¿”å›nullã€‚
	  document.querySelectorAll(".drop-zone__input").forEach(function(inputElement) {
	  const dropZoneElement = inputElement.closest(".drop-zone");
	// è§¸ç™¼é»æ“Šäº‹ä»¶
	  dropZoneElement.addEventListener("click", function(e){
		inputElement.click();
	  });
	// ç•¶åœ–æ¡†æ”¹è®Šæ™‚ï¼Œå¾ç„¡åˆ°æœ‰ or æ›åœ–
	// é¸å–çš„æª”æ¡ˆæ•¸é‡ä¸ç‚º0(true)æ‰åŸ·è¡Œ--æ›´æ–°é è¦½åœ–
	// ç²å–ç¬¬ä¸€å€‹æª”æ¡ˆ[0]
	  inputElement.addEventListener("change", function(e) {
		if (inputElement.files.length); {
		  updateThumbnail(dropZoneElement, inputElement.files[0]);
		}
	  });
	// dragoveræŠŠæ–‡ä»¶æ‹–æ”¾é€²å»æ™‚è§¸ç™¼
	// å–æ¶ˆDOMé è¨­åŠŸèƒ½å¦å‰‡å¯èƒ½ç„¡æ³•æ­£ç¢ºè§¸ç™¼ drag äº‹ä»¶(ç”¨æ³•)
	  dropZoneElement.addEventListener("dragover", function(e) {
		e.preventDefault();
	  });

	// å–æ¶ˆDOMé è¨­åŠŸèƒ½å¦å‰‡å¯èƒ½ç„¡æ³•æ­£ç¢ºè§¸ç™¼ drop äº‹ä»¶(ç”¨æ³•)
	// æª”æ¡ˆæˆåŠŸæ‹–å…¥æ™‚è§¸ç™¼
	// æ•¸æ“šå‚³è¼¸æ–‡ä»¶dataTransfer.filesæª”æ¡ˆæ•¸é‡ä¸ç‚º0(true)åŸ·è¡Œ--æ›´æ–°inputElementã€æ›´æ–°é è¦½åœ–
	  dropZoneElement.addEventListener("drop", function(e){
		e.preventDefault();

		if (e.dataTransfer.files.length) {
		  inputElement.files = e.dataTransfer.files;
		  updateThumbnail(dropZoneElement, e.dataTransfer.files[0]);
		}

	
	  });
	});



	/**
	 * Updates the thumbnail on a drop zone element.
	 *
	 * @param {HTMLElement} dropZoneElement
	 * @param {File} file
	 */
	 // æ›´æ–°é ç¸®åœ–
	 // è¨­å®šé ç¸®åœ–
	function updateThumbnail(dropZoneElement, file) {
	  let thumbnailElement = dropZoneElement.querySelector(".drop-zone__thumb");

	  // ç¬¬ä¸€æ¬¡---ç•¶æç¤ºæ–‡å­—å‡ºç¾(true)--ç§»é™¤æç¤ºæ–‡å­—
	  if (dropZoneElement.querySelector(".drop-zone__prompt")) {
		dropZoneElement.querySelector(".drop-zone__prompt").remove();
	  }

	  // ç¬¬ä¸€æ¬¡---å‰µé€ é è¦½åœ–ï¼Œç•¶é è¦½åœ–ä¸å­˜åœ¨æ™‚æˆç«‹
	  // å»ºç«‹æ–°classæ–¹ä¾¿è¨­å®šcss
	  // åœ¨æ¡†æ¡†ä¸­æ·»åŠ å­é›†---é è¦½åœ–
	  if (!thumbnailElement) {
		thumbnailElement = document.createElement("div");
		thumbnailElement.classList.add("drop-zone__thumb");
		dropZoneElement.appendChild(thumbnailElement);
	  }
	  // è¨­å®šé è¦½åœ–çš„å±¬æ€§label=åœ–ç‰‡æª”å
	  thumbnailElement.dataset.label = file.name;

	  // é¡¯ç¤ºåœ–ç‰‡
	  // startsWish("image/")åˆ¤æ–·æ˜¯å¦ç‚ºåœ–ç‰‡æ ¼å¼true---è®€å–åœ–ç‰‡ï¼Œåœ–ç‰‡ä¸Šå‚³æˆåŠŸ---é è¦½åœ–å‡ºç¾
	  // falseé¡¯ç¤ºç©ºç™½
	  if (file.type.startsWith("image/")) {
		const reader = new FileReader();
		reader.readAsDataURL(file);
		reader.onload = function() {
		  thumbnailElement.style.backgroundImage = `url('${reader.result}')`;
		  var img = thumbnailElement.style.backgroundImage
		  sumit();
		};
	  } else {
		thumbnailElement.style.backgroundImage = null;
	  }
	}
	
// é»æ“Šç™¼å¸ƒ

	
	var sumit = function(){
		const title = document.getElementById("title");
		const intro = document.getElementById("intro");
		const link = document.getElementById("link");
		const list = document.getElementById("list");
		const btn = document.getElementsByClassName("btn")[0];
		
		btn.addEventListener("click", function(img){
			list.innerHTML = list.innerHTML +`
			<div class = "article">
			<h2>${title.value}</h2>
			<p>${intro.value}</p>
			<p>${link.value}</p>
			<img src="${img}">
			</div>
			`;
			title.value= " ";
			intro.value= " ";
			link.value = " ";

		})}	
	

  </script>
</body>